<div class="container-fluid p-4">
  
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="text-primary fw-bold mb-0">
        <i class="fas fa-file-medical-alt me-2"></i>Historial Clínico
      </h2>
      <p class="text-muted mt-1" *ngIf="pacienteActual">
        Paciente: <strong>{{ pacienteActual.nombre }} {{ pacienteActual.apellido }}</strong> 
        (DNI: {{ pacienteActual.usuario?.documentoIdentidad }})
      </p>
      <p class="text-muted mt-1" *ngIf="!pacienteActual">
        Registro general de atenciones de la clínica.
      </p>
    </div>
    
    <a *ngIf="pacienteActual" routerLink="/panel/pacientes" class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left me-2"></i>Volver a Pacientes
    </a>
  </div>

  <app-tabla-generica
    [data]="historial"
    [columnConfig]="columnas"
    title="Registros de Atención"
    [showAddButton]="false" 
    (onEdit)="verDetalle($event)"
    [permissionManage]="'VER_HISTORIAL'"> </app-tabla-generica>

</div>

<app-formulario-consulta
  [visible]="mostrarDetalle"
  [consultaData]="registroSeleccionado"
  [pacienteNombre]="pacienteActual ? pacienteActual.nombre + ' ' + pacienteActual.apellido : ''"
  (onCancelar)="mostrarDetalle = false"
  (onGuardar)="mostrarDetalle = false"> 
</app-formulario-consulta>